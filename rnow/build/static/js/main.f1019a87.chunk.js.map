{"version":3,"sources":["img/history.jpg","img/logo.svg","img/user-icon.svg","components/current_subject/current_subject.tsx","components/time_table/time_table.tsx","components/loader/loader.tsx","App.tsx","index.tsx"],"names":["CurrentSubject","lesson","className","styles","current_subject","backgroundImage","historyImage","style","src","logo","alt","id","title","getCabinet","cabinet","userIcon","teacher","_formatTime","time","h","toString","m","length","MapPinIcon","width","height","viewBox","fill","xmlns","d","ClockIcon","fill-rule","clip-rule","TimeTable","lessons","times","currentLessonIndex","map","e","i","from","to","Loader","React","Component","_mapIndexToDay","_calcCurrentLesson","lessonIndex","now","Date","getHours","getMinutes","start","end","lessonsTimes_","_isBetween","push","_add","add","min","Math","trunc","time1","time2","time3","cab","App","useState","loading","setLoading","currentLesson","setCurrentLesson","setLessons","lessonsTime","setLessonsTime","useEffect","axios","get","then","res","console","log","data","date","getDay","catch","Fragment","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f1019a87.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/history.d8b66c08.jpg\";","export default __webpack_public_path__ + \"static/media/logo.ec5d5243.svg\";","export default __webpack_public_path__ + \"static/media/user-icon.42813db8.svg\";","import React from \"react\";\r\nimport './index.scss';\r\n\r\nimport historyImage from \"../../img/history.jpg\";\r\nimport logo from \"../../img/logo.svg\";\r\nimport userIcon from \"../../img/user-icon.svg\";\r\nimport {observer} from \"mobx-react\";\r\nimport {getCabinet, Lesson} from \"../../App\";\r\n\r\ntype Props = {\r\n    className: string;\r\n    lesson: Lesson;\r\n}\r\n\r\nconst CurrentSubject: React.FC<Props> = ({lesson, className}) => {\r\n    const styles = {\r\n        current_subject: {\r\n            backgroundImage: `url(${historyImage})`,\r\n        }\r\n    };\r\n\r\n\r\n    return <div className=\"current_subject\" style={styles.current_subject}>\r\n        <header>\r\n            <div className=\"logo\">\r\n                <img src={logo} alt=\"ring now logo\" className=\"logo\"/>\r\n                <h2 id=\"logo-text\">Ring Now</h2>\r\n            </div>\r\n            <div className=\"class_button\">{className}</div>\r\n        </header>\r\n\r\n        <div className=\"subject\">\r\n            <h1>{lesson.title}</h1>\r\n            <p id=\"cabinet\">{getCabinet(lesson.cabinet)}</p>\r\n        </div>\r\n\r\n        <div className=\"teacher\">\r\n            <img src={userIcon} alt=\"user-icon\"/>\r\n            <p id=\"name\">{lesson.teacher}</p>\r\n        </div>\r\n\r\n    </div>\r\n}\r\n\r\n\r\nexport default CurrentSubject;","import React from \"react\";\r\nimport './index.scss';\r\nimport {getCabinet, Lesson, LessonTime, Time} from \"../../App\";\r\n\r\ntype Props = {\r\n    lessons: Lesson[],\r\n    times: LessonTime[],\r\n    currentLessonIndex: number;\r\n}\r\n\r\nconst TimeTable: React.FC<Props> = ({lessons, times, currentLessonIndex}) => {\r\n    return <\r\n        div className=\"time_table\">\r\n        <h2>Уроки</h2>\r\n        <div className=\"lessons\">\r\n\r\n            <div className=\"time\">\r\n                {\r\n                    lessons.map((e, i) => {\r\n                        return <div className=\"time-group\">\r\n                            <p className=\"start_time\">{_formatTime(times[i].from)}</p>\r\n                            <p className=\"end_time\">{_formatTime(times[i].to)}</p>\r\n                        </div>\r\n                    })\r\n                }\r\n            </div>\r\n\r\n            <div className=\"divider\"/>\r\n\r\n            <div className=\"cards\">\r\n\r\n                {\r\n                    lessons.map((e, i) => {\r\n                        return <div className={`card ${i === currentLessonIndex ? \"active\" : \"\"}`}>\r\n                            <span className=\"lesson\">{e.title}</span>\r\n                            <p className=\"teacher\">{e.teacher}</p>\r\n                            <div className=\"info cabinet\">\r\n                                <MapPinIcon/>\r\n                                <p className=\"cabinet\">{getCabinet(e.cabinet)}</p>\r\n                            </div>\r\n                            <div className=\"info lesson_time\">\r\n                                <ClockIcon/>\r\n                                <p className=\"clock\">{_formatTime(times[i].from)} - {_formatTime(times[i].to)}</p>\r\n                            </div>\r\n                        </div>\r\n                    })\r\n                }\r\n\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nconst _formatTime = (time: Time): string => {\r\n    let h = time.h.toString(), m = time.m.toString();\r\n    if (h.length === 1) h = \"0\" + h;\r\n    if (m.length === 1) m = \"0\" + m;\r\n    return `${h}:${m}`;\r\n};\r\n\r\nconst MapPinIcon: React.FC = () => {\r\n    return <svg width=\"10\" height=\"12\" viewBox=\"0 0 10 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path\r\n            d=\"M5.00008 0.166656C2.74258 0.166656 0.916748 1.99249 0.916748 4.24999C0.916748 7.31249 5.00008 11.8333 5.00008 11.8333C5.00008 11.8333 9.08342 7.31249 9.08342 4.24999C9.08342 1.99249 7.25758 0.166656 5.00008 0.166656ZM5.00008 5.70832C4.61331 5.70832 4.24238 5.55468 3.96888 5.28119C3.69539 5.0077 3.54175 4.63676 3.54175 4.24999C3.54175 3.86322 3.69539 3.49228 3.96888 3.21879C4.24238 2.9453 4.61331 2.79166 5.00008 2.79166C5.38686 2.79166 5.75779 2.9453 6.03128 3.21879C6.30477 3.49228 6.45842 3.86322 6.45842 4.24999C6.45842 4.63676 6.30477 5.0077 6.03128 5.28119C5.75779 5.55468 5.38686 5.70832 5.00008 5.70832V5.70832Z\"\r\n            fill=\"white\"/>\r\n    </svg>;\r\n}\r\n\r\nconst ClockIcon: React.FC = () => {\r\n    return <svg width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\"\r\n              d=\"M10 5C10 6.32608 9.47322 7.59785 8.53553 8.53553C7.59785 9.47322 6.32608 10 5 10C3.67392 10 2.40215 9.47322 1.46447 8.53553C0.526784 7.59785 0 6.32608 0 5C0 3.67392 0.526784 2.40215 1.46447 1.46447C2.40215 0.526784 3.67392 0 5 0C6.32608 0 7.59785 0.526784 8.53553 1.46447C9.47322 2.40215 10 3.67392 10 5V5ZM5 2.1875C5 2.10462 4.96708 2.02513 4.90847 1.96653C4.84987 1.90792 4.77038 1.875 4.6875 1.875C4.60462 1.875 4.52513 1.90792 4.46653 1.96653C4.40792 2.02513 4.375 2.10462 4.375 2.1875V5.625C4.37502 5.68008 4.38959 5.73418 4.41725 5.78182C4.44491 5.82945 4.48467 5.86893 4.5325 5.89625L6.72 7.14625C6.79179 7.18505 6.8759 7.19423 6.95437 7.17183C7.03283 7.14943 7.09942 7.09722 7.13991 7.02637C7.18039 6.95553 7.19156 6.87165 7.17102 6.79268C7.15048 6.71371 7.09987 6.6459 7.03 6.60375L5 5.44375V2.1875Z\"\r\n              fill=\"white\"/>\r\n    </svg>;\r\n}\r\n\r\nexport default TimeTable;","import React from \"react\";\r\nimport \"./index.css\";\r\n\r\nclass Loader extends React.Component {\r\n    render() {\r\n        return <div className=\"loading\">\r\n            <div className=\"lds-ellipsis\">\r\n                <div/>\r\n                <div/>\r\n                <div/>\r\n                <div/>\r\n            </div>\r\n            \r\n        </div>\r\n    }\r\n}\r\n\r\nexport default Loader;","import React, {useEffect, useState} from \"react\";\r\nimport CurrentSubject from \"./components/current_subject/current_subject\";\r\nimport TimeTable from \"./components/time_table/time_table\";\r\nimport \"./main.css\";\r\nimport Loader from \"./components/loader/loader\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst App: React.FC = () => {\r\n\r\n    const [className, setClassName] = useState(\"8A\");\r\n    const [loading, setLoading] = useState(true);\r\n    const [currentLesson, setCurrentLesson] = useState(0);\r\n    const [lessons, setLessons] = useState<Lesson[]>([]);\r\n    const [lessonsTime, setLessonsTime] = useState<LessonTime[]>([]);\r\n\r\n\r\n    useEffect(() => {\r\n        axios.get(`http://ring-now.tk/class/${className}`,)\r\n            .then((res) => {\r\n                console.log(res.data);\r\n                const date = new Date().getDay();\r\n                setLessons(res.data[_mapIndexToDay[date]]);\r\n                const [lessonIndex, lessonsTime] = _calcCurrentLesson(res.data[_mapIndexToDay[date]]);\r\n                setCurrentLesson(lessonIndex);\r\n                setLessonsTime(lessonsTime);\r\n                setLoading(false);\r\n            })\r\n            .catch((e) => {\r\n\r\n            })\r\n    }, []);\r\n\r\n\r\n    return <React.Fragment>\r\n        {\r\n            !loading\r\n                ? <React.Fragment>\r\n                    <CurrentSubject className={className} lesson={lessons[currentLesson]}/>\r\n                    <TimeTable lessons={lessons} times={lessonsTime} currentLessonIndex={currentLesson}/>\r\n                </React.Fragment>\r\n                : <Loader/>\r\n        }\r\n    </React.Fragment>\r\n\r\n}\r\n\r\nconst _mapIndexToDay = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\r\n\r\nexport const _calcCurrentLesson = (lessons: Lesson[]): [number, LessonTime[]] => {\r\n    let lessonIndex = lessons.length - 1;\r\n    const now = {h: new Date().getHours(), m: new Date().getMinutes()};\r\n    let start = {h: 9, m: 0}, end = {h: 9, m: 45};\r\n    const lessonsTimes_: LessonTime[] = [];\r\n\r\n    for (let i = 0; i < lessons.length; i++) {\r\n\r\n        if (_isBetween(start, end, now)) {\r\n            lessonIndex = i;\r\n        }\r\n\r\n        lessonsTimes_.push({\r\n            from: start,\r\n            to: end,\r\n        });\r\n\r\n        // if (i == 0) {\r\n        //     start = _add(start, 55);\r\n        //     end = _add(end, 45);\r\n        // } else\r\n        if (i === 2 || i === 3) {\r\n            start = _add(start, 65)\r\n            end = _add(end, 65)\r\n        } else {\r\n            start = _add(start, 55)\r\n            end = _add(end, 55)\r\n        }\r\n    }\r\n\r\n    return [lessonIndex, lessonsTimes_];\r\n};\r\nconst _add = (time: Time, add: number): Time => {\r\n    const min = time.h * 60 + time.m + add;\r\n    return {h: Math.trunc(min / 60), m: min % 60};\r\n}\r\n\r\nconst _isBetween = (time1: Time, time2: Time, time3: Time): boolean => {\r\n    return time1.h <= time3.h && time2.h >= time3.h && time1.m <= time3.m && time2.m >= time3.m;\r\n}\r\n\r\nexport const getCabinet = (cab: number) : string => {\r\n    if (cab === 0) return \"Спортзал\";\r\n    return `${cab} кабинет`;\r\n}\r\n\r\nexport type Lesson = {\r\n    title: string;\r\n    cabinet: number;\r\n    teacher: string;\r\n};\r\n\r\nexport type Time = {\r\n    h: number;\r\n    m: number;\r\n}\r\n\r\nexport type LessonTime = {\r\n    from: Time;\r\n    to: Time;\r\n}\r\n\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<React.Fragment><App/></React.Fragment>, document.getElementById(\"root\"));"],"sourceRoot":""}